# ✅ 卡片消息功能已简化

## 🎯 重要变更

**现在发送卡片消息更简单了！**

### 之前的方式（复杂）❌
需要输入完整的JSON结构：
```json
{
  "msgtype": "card",
  "card": {
    "header": {...},
    "elements": [...]
  }
}
```

### 现在的方式（简单）✅
**只需要输入card部分**：
```json
{
  "header": {...},
  "elements": [...]
}
```

系统会**自动添加** `msgtype` 字段！

---

## 📝 快速使用指南

### 1️⃣ 使用测试文件（最简单）

#### 简单测试
使用 `card_simple_test.json`：
```bash
1. 打开文件复制全部内容
2. 在发送消息页面选择"卡片消息"
3. 粘贴到"消息内容"框
4. 点击发送
```

#### 完整测试
使用 `card_only.json`（带国际化）：
```bash
1. 打开文件复制全部内容
2. 粘贴到消息内容框
3. 点击发送
```

### 2️⃣ 手写JSON

最简单的卡片：
```json
{
  "header": {
    "title": {
      "tag": "text",
      "content": {
        "type": "plainText",
        "text": "您的标题"
      }
    }
  },
  "elements": [
    {
      "tag": "text",
      "content": {
        "type": "plainText",
        "text": "您的内容"
      }
    }
  ]
}
```

### 3️⃣ 使用表单

不想写JSON？
1. 在"卡片标题"输入标题
2. 在"卡片内容"输入内容
3. 点击发送

系统会自动构造标准格式！

---

## 📦 可用的测试文件

### card_simple_test.json
最简单的测试用例：
- 只有标题和内容
- 适合快速测试
- 大小：~300字节

### card_only.json
完整测试用例：
- 包含标题、副标题
- 包含国际化（中文繁体、英文）
- 适合完整功能测试
- 大小：~1.5KB

### card_message_case.json（旧）
完整格式（包含msgtype）：
- 这是旧格式的测试文件
- 包含了msgtype字段
- 如果使用此文件，需要**去掉最外层**的msgtype和card包装

---

## 🔄 从旧格式转换

如果你有旧格式的JSON：
```json
{
  "msgtype": "card",
  "card": {
    // 👈 只要这里面的内容
    "header": {...},
    "elements": [...]
  }
}
```

**操作**：
1. 删除最外层的 `{"msgtype": "card", "card":`
2. 删除最后的 `}`
3. 保留中间的内容
4. 粘贴使用

---

## ✨ 优势

### 之前（复杂）
- ❌ 需要记住完整结构
- ❌ 容易嵌套错误
- ❌ JSON更长更复杂

### 现在（简单）
- ✅ 只关注card内容
- ✅ 系统自动包装
- ✅ JSON更短更清晰
- ✅ 不会嵌套错误

---

## 🎓 学习建议

1. **第一次使用**：
   - 使用 `card_simple_test.json`
   - 直接复制粘贴发送
   - 体验最简单的方式

2. **了解格式**：
   - 查看 `card_simple_test.json` 的内容
   - 理解基本结构
   - 尝试修改文字

3. **高级功能**：
   - 使用 `card_only.json`
   - 添加副标题
   - 使用Markdown格式
   - 添加国际化

4. **自己编写**：
   - 参考测试文件
   - 按照格式编写
   - 使用jsonlint验证

---

## 📚 相关文档

- `CARD_SIMPLE_GUIDE.md` - 详细使用指南
- `CARD_MESSAGE_TEST.md` - 完整测试文档
- `card_simple_test.json` - 简单测试用例
- `card_only.json` - 完整测试用例

---

## 🚀 立即开始

```bash
# 1. 确保服务器运行
访问: http://127.0.0.1:8080/

# 2. 登录系统
用户名: admin
密码: admin123456

# 3. 进入机器人详情页
点击机器人名称

# 4. 发送卡片消息
点击"发送消息" → 选择"卡片消息" → 粘贴JSON → 发送
```

---

**更新时间**: 2026-01-30  
**版本**: v2.1  
**改进**: 简化卡片消息输入，只需card部分的JSON ✨
